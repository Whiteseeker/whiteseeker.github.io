function randomIntFromInterval(o,e){return Math.floor(Math.random()*(e-o+1)+o)}function generateMap(o){console.log("[worker] Start generating map");var e=o.width,a=o.height,r=o.roughness,t=o.initalt,n=o.seed;console.log("[worker] seed = "+n),Math.seedrandom(n);for(var s=4,l=(Math.floor(e/s),[]),d=0;e>d;d++)l[d]=t;for(var g=[[0,e-1,Math.max(1-t,t)-.001]];g.length>0;){console.log("stack.length = "+g.length);var i=g.pop();if(console.log("elt["+i[0]+" ; "+i[1]+"]"),!(i[1]-i[0]<=1)){var c=i[0]+Math.floor((i[1]-i[0])/2);console.log("middle = "+c);var h=i[2],m=h*r;i[1]-i[0]>2&&(g.push([i[0],c,m]),g.push([c,i[1],m]));var f=(l[i[1]]-l[i[0]])/(i[1]-i[0]),p=l[i[1]]-f*i[1];l[c]=f*c+p,l[c]+=2*h*Math.random()-h,l[c]<0&&(l[c]=0),l[c]>1&&(l[c]=1)}}for(var v=[],M=0;e>M;M++)for(var u=l[M]*a,j=0;a>j;j++)u>j?v[j*e+M]=180:v[j*e+M]=10;postMessage({type:"Result",data:v})}importScripts("//cdnjs.cloudflare.com/ajax/libs/seedrandom/2.4.0/seedrandom.min.js"),onmessage=function(o){console.log("Message received from main script"),generateMap(o.data)};